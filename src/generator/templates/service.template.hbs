// Automatically generated by service-generator.js, don't change!
import { BaseService } from './base-service';
{{#if parsed.imports}}
import { {{#each parsed.imports}}{{this}}{{#unless @last}}, {{/unless}}{{/each}} } from '../models';
{{/if}}

{{#if docs.Description}}
/**
 * {{docs.Description}}
 *
 * @export
 * @class {{svcName}}{{#if extension}}Base{{/if}}
 * @extends {BaseService}
 */
{{/if}}
export class {{svcName}}{{#if extension}}Base{{/if}} extends BaseService{{#if parsed.eventProperties}}<{{svcName}}Event>{{else}}<undefined>{{/if}} {
  readonly serviceNane: string = '{{name}}';
  readonly controlUrl: string = '{{controlURL}}';  
  readonly eventSubUrl: string = '{{eventSubURL}}';
  readonly scpUrl: string = '{{SCPDURL}}';

  //#region methods
  {{#each parsed.methods}}
  {{#if description}}
  /**
   * {{description}}
  {{#if parameters}}
   *
  {{/if}}
  {{#each parameters}}
   * @param -{-{{relatedStateVariable.ttype}}-}- input.{{name}} - {{{description}}}{{#if relatedStateVariable.allowedValueList}} [ {{{relatedStateVariable.allowedValueList.allowedValue}}} ]{{/if}}
  {{/each}}
   */
  {{/if}}
  {{#if parameters}}
  async {{name}}(input: { {{#each parameters}}{{name}}: {{relatedStateVariable.ttype}}{{#unless @last}}; {{/unless}}{{/each}} }{{{defaultInput}}}):
    {{#if responseType}}
    Promise<{{responseType}}>{ return await this.SoapRequestWithBody<typeof input, {{responseType}}>('{{name}}', input); }
    {{else}}
    Promise<boolean> { return await this.SoapRequestWithBodyNoResponse<typeof input>('{{name}}', input); }
    {{/if}}
  {{else}}
  async {{name}}():
    {{#if responseType}}
    Promise<{{responseType}}>{ return await this.SoapRequest<{{responseType}}>('{{name}}'); }
    {{else}}
    Promise<boolean> { return await this.SoapRequestNoResponse('{{name}}'); }
    {{/if}}
  {{/if}}
  {{#unless @last}}

  {{/unless}}
  {{/each}}
  //#endregion

  {{#if parsed.eventProperties}}
  // Event properties from service description.
  protected eventProperties(): {[key: string]: string} {
    return {
    {{#each parsed.eventProperties}}
      '{{name}}': '{{ttype}}'{{#unless @last}},{{/unless}}
    {{/each}}
    };
  }
  {{else}}
  // No properties in service description, throw error on retrieval.
  protected eventProperties(): {[key: string]: string} {
    throw new Error('No event properties in service definition')
  }
  {{/if}}
}

// Generated responses
{{#each parsed.responses}}
export interface {{name}} {
  {{#each properties}}
  {{name}}: {{{relatedStateVariable.ttype}}};
  {{/each}}
}{{#unless @last}}

{{/unless}}{{/each}}
{{#if parsed.eventProperties}}

// Strong type event 
export interface {{svcName}}Event {
  {{#each parsed.eventProperties}}
  {{name}}?: {{ttype}};
  {{/each}}
}
{{/if}}
{{{extension}}}